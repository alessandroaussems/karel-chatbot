{"version":3,"sources":["main.js"],"names":["sendMessage","value","event","keyCode","message","document","getElementsByClassName","createUserMessage","removeTypeIcon","createTypeIcon","allowToSend","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","createAnswer","this","responseText","open","send","listitem","createElement","className","createTextNode","appendChild","messageList","setTimeout","innerHTML","BOTTHINKINGTIME","i","span","typingindicator","removeChild","getCookie","cname","name","decodedCookie","decodeURIComponent","cookie","ca","split","length","c","charAt","substring","indexOf","doKdGLogin","login","getElementById","password","button","sessionid","disabled","classList","remove","add","setRequestHeader","showLoginForm","hideLoginForm","welcomemessage","addEventListener"],"mappings":"AAIA,QAAAA,aAAAC,EAAAC,GAEA,GAAA,IAAAA,EAAAC,SAAA,SAAAF,EACA,CACA,GAAAA,EAAA,QAEA,GAAAG,GAAAC,SAAAC,uBAAA,aAAA,GAAAL,UAIA,IAAAG,GAAAH,CAOA,IALAM,kBAAAH,GACAC,SAAAC,uBAAA,aAAA,GAAAL,MAAA,GAEAO,iBACAC,iBACAC,YACA,CACAA,aAAA,CAEA,IAAAC,EACAA,GAAA,GAAAC,gBACAD,EAAAE,mBAAA,WACA,GAAAF,EAAAG,YAAA,KAAAH,EAAAI,QACAC,aAAAC,KAAAC,cAEA,GAAAP,EAAAG,YAAA,KAAAH,EAAAI,QAEAC,aAAA,6JAGAL,EAAAQ,KAAA,MAAA,UAAAf,GAAA,GACAO,EAAAS,SAKA,QAAAb,mBAAAH,GAGA,GAAAiB,GAAAhB,SAAAiB,cAAA,KACAD,GAAAE,UAAA,cACAnB,EAAAC,SAAAmB,eAAApB,GACAiB,EAAAI,YAAArB,GACAsB,YAAAD,YAAAJ,GAEA,QAAAL,cAAAZ,GAGAuB,WAAA,WACAnB,gBACA,IAAAa,GAAAhB,SAAAiB,cAAA,KACAD,GAAAE,UAAA,aAEAF,EAAAO,UAAAxB,EACAsB,YAAAD,YAAAJ,GACAX,aAAA,GACAmB,iBAEA,QAAApB,kBAGA,GAAAY,GAAAhB,SAAAiB,cAAA,KACAD,GAAAE,UAAA,6BACA,KAAA,GAAAO,GAAA,EAAAA,EAAA,EAAAA,IACA,CACA,GAAAC,GAAA1B,SAAAiB,cAAA,OACAD,GAAAI,YAAAM,GAEAL,YAAAD,YAAAJ,GAEA,QAAAb,kBAEA,GAAAwB,GAAA3B,SAAAC,uBAAA,oBAAA,EACA0B,IAEAN,YAAAO,YAAAD,GAGA,QAAAE,WAAAC,GAIA,IAAA,GAHAC,GAAAD,EAAA,IACAE,EAAAC,mBAAAjC,SAAAkC,QACAC,EAAAH,EAAAI,MAAA,KACAX,EAAA,EAAAA,EAAAU,EAAAE,OAAAZ,IAAA,CAEA,IADA,GAAAa,GAAAH,EAAAV,GACA,KAAAa,EAAAC,OAAA,IACAD,EAAAA,EAAAE,UAAA,EAEA,IAAA,GAAAF,EAAAG,QAAAV,GACA,MAAAO,GAAAE,UAAAT,EAAAM,OAAAC,EAAAD,QAGA,MAAA,GAEA,QAAAK,YAAA7C,GAEA,GAAA8C,GAAA3C,SAAA4C,eAAA,SAAAhD,MACAiD,EAAA7C,SAAA4C,eAAA,YAAAhD,MACAkD,EAAA9C,SAAA4C,eAAA,eACAG,EAAAlB,UAAA,cACAiB,GAAAE,UAAA,CACA,IAAA1C,EACAA,GAAA,GAAAC,gBACAD,EAAAE,mBAAA,WACA,GAAAF,EAAAG,YAAA,KAAAH,EAAAI,SACAE,KAAAC,eAEAb,SAAA4C,eAAA,WAAAK,UAAAC,OAAA,WACAlD,SAAA4C,eAAA,cAAAK,UAAAE,IAAA,aACAxC,aAAA,4EAEAC,KAAAC,eAEAiC,EAAAE,UAAA,EACAhD,SAAA4C,eAAA,cAAAK,UAAAE,IAAA,cAIA7C,EAAAQ,KAAA,MAAA,eAAA,GACAR,EAAA8C,iBAAA,eAAA,qCACA9C,EAAAS,KAAA,SAAA4B,EAAA,aAAAE,EAAA,gBAAAE,GAGA,QAAAM,eAAAxD,GAEAG,SAAA4C,eAAA,WAAAK,UAAAE,IAAA,WAEA,QAAAG,eAAAzD,GAEAG,SAAA4C,eAAA,WAAAK,UAAAC,OAAA,WAtIA,GAAA7B,aAAArB,SAAA4C,eAAA,eACApB,gBAAA,IACA+B,eAAA,2CACAlD,aAAA,CAqIAL,UAAAwD,iBAAA,mBAAA,SAAA3D,GACA,IAAAgC,UAAA,WAAA,GAAAA,UAAA,WAEAP,WAAA,WACAlB,iBACAO,aAAA4C,iBACA","file":"../js/scripts.min.js","sourcesContent":["var messageList=document.getElementById(\"messagelist\");\nvar BOTTHINKINGTIME=3000;\nvar welcomemessage=\"Hallo ik ben Karel! Stel je vragen maar!\";\nvar allowToSend=true;\nfunction sendMessage(value,event)\n{\n    if(event.keyCode == 13 || value==\"getit\")//IF ENTER KEY IS PRESSED OR SEND BUTTON\n    {\n        if(value=\"getit\")\n        {\n            var message=document.getElementsByClassName(\"userinput\")[0].value;\n        }\n        else\n        {\n            var message=value;\n        }\n        createUserMessage(message);\n        document.getElementsByClassName(\"userinput\")[0].value=\"\";\n        //MAKE SURE TYPEICON IS ALWAYS @ THE BOTTOM\n        removeTypeIcon();//REMOVE OLD TYPE ICON\n        createTypeIcon();//CREATE NEW TYPE ICON\n        if(allowToSend)//CHECK IF NO PREVIOUS REQUEST IS STILL EXECUTING\n        {\n            allowToSend=false; // BECAUSE WE START EXECUTING A NEW REQUEST\n            //AJAX CALL TO OUR API\n            var xmlhttp;\n            xmlhttp = new XMLHttpRequest();\n            xmlhttp.onreadystatechange = function(){\n                if (xmlhttp.readyState == 4 && xmlhttp.status == 200){\n                    createAnswer(this.responseText);\n                }\n                if(xmlhttp.readyState == 4 && xmlhttp.status == 500)\n                {\n                    createAnswer(\"<p>Whoops er ging iets fout. Je mag nu een mail sturen naar <a href='mailto:alessandro.aussems@student.kdg.be'>alessandro.aussems@student.kdg.be</a></p>\");\n                }\n            };\n            xmlhttp.open(\"GET\", \"./chat/\"+message, true);\n            xmlhttp.send();\n        }\n    }\n\n}\nfunction createUserMessage(message)\n{\n    //ADDING THE USER'S MESSAGE TO THE DOM\n    var listitem=document.createElement(\"li\");\n    listitem.className=\"usermessage\";\n    message=document.createTextNode(message);\n    listitem.appendChild(message);\n    messageList.appendChild(listitem);\n}\nfunction createAnswer(message)\n{\n        //WAIT BOTTHIKNINGTIME THEN REMOVE TYPING ICON AND CREATE RESPONSE\n        setTimeout(function(){\n            removeTypeIcon();\n            var listitem=document.createElement(\"li\");\n            listitem.className=\"botmessage\";\n            //message=document.createTextNode(message);\n            listitem.innerHTML=message;\n            messageList.appendChild(listitem);\n            allowToSend=true; // THIS REQUEST IS FINISHED SO THE NEXT ONE IS NOW ALLOWED\n        }, BOTTHINKINGTIME);\n}\nfunction createTypeIcon()\n{\n    //CREATING TYPING ICON HERE\n    var listitem=document.createElement(\"li\");\n    listitem.className=\"typing-indicator botmessage\";\n    for(var i=0;i<3;i++)\n    {\n        var span=document.createElement(\"span\");\n        listitem.appendChild(span);\n    }\n    messageList.appendChild(listitem);\n}\nfunction removeTypeIcon()\n{\n    var typingindicator=document.getElementsByClassName(\"typing-indicator\")[0];\n    if(typingindicator)//IF THE ELEMENT EXISTS THEN REMOVE\n    {\n        messageList.removeChild(typingindicator);\n    }\n}\nfunction getCookie(cname) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for(var i = 0; i <ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n}\nfunction doKdGLogin(event)\n{\n    var login=document.getElementById(\"login\").value;\n    var password=document.getElementById(\"password\").value;\n    var button=document.getElementById(\"loginbutton\");\n    var sessionid=getCookie(\"chatsession\");\n    button.disabled=true;\n    var xmlhttp;\n    xmlhttp = new XMLHttpRequest();\n    xmlhttp.onreadystatechange = function(){\n        if (xmlhttp.readyState == 4 && xmlhttp.status == 200){\n            if(this.responseText)\n            {\n                document.getElementById(\"overlay\").classList.remove(\"display\");\n                document.getElementById(\"kdgconnect\").classList.add(\"nodisplay\");\n                createAnswer(\"Dankjewel om je KdG-account te koppelen! Ik kan je nu nog beter helpen!\")\n            }\n            if(!this.responseText)\n            {\n                button.disabled=false;\n                document.getElementById(\"loginerror\").classList.add(\"display\");\n            }\n        }\n    }\n    xmlhttp.open('PUT', \"./kdglogin/\", true);\n    xmlhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xmlhttp.send(\"login=\"+login+\"&password=\"+password+\"&chatsession=\"+sessionid);\n\n}\nfunction showLoginForm(event)\n{\n    document.getElementById(\"overlay\").classList.add(\"display\");\n}\nfunction hideLoginForm(event)\n{\n    document.getElementById(\"overlay\").classList.remove(\"display\");\n}\ndocument.addEventListener(\"DOMContentLoaded\", function(event) {\n    if(getCookie(\"visits\")!=\"\" && getCookie(\"visits\")==1)//CHECK IF COOKIE VISITS EXISTS AND IF FIRST TIME USER VISITS PAGE\n    {\n        setTimeout(function(){\n            createTypeIcon();\n            createAnswer(welcomemessage);\n        }, 1000);\n    }\n});"]}